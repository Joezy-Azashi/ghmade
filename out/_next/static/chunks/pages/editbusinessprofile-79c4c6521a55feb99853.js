_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[42],{Twb6:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/editbusinessprofile",function(){return a("ynBa")}])},hxr3:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r}));var n=[["wr","Western Region"],["as","Ashanti"],["ba","Brong Ahafo Region"],["be","Bono-East Region"],["ah","Ahafo Region"],["cr","Central Region"],["er","Eastern Region"],["gr","Greater Accra Region"],["nr","Northern Region"],["sa","Savannah Region"],["ne","North East Region"],["ue","Upper East Region"],["uw","Upper West Region"],["ot","Oti Region"],["wn","Western-North Region"],["vr","Volta Region"]],r=[["AB&M","Administration, Business and Management"],["AF&F","Agriculture, Fishing and Forestry"],["CI&T","Computing, IT and Telecom"],["C&S","Consulting and Strategy"],["DA&C","Design, Arts and Crafts"],["EDU&T","Education and Training"],["ENG","Engineering"],["EES","Entertainment, Events and Sports"],["F&T","Fashion and Textiles"],["FS","Financial Services"],["GA&A","Garage Services, Automotive and Aviation"],["H&B","Hairdressing and Beauty"],["HP&S","Health care, Pharmaceuticals and Safety"],["HC&T","Hospitality, Catering and Tourism"],["L&C","Legal and Court Services"],["M&P","Manufacturing and Production"],["M&C","Media and Communications"],["MIN","Mining"],["NN&C","NGO, NPO and Charity"],["O&G","Oil and Gas"],["P&P","Print and Publishing"],["M&A","Marketing and Advertising"],["RE&PS","Real Estates and Property Services"],["HR","Recruitment"],["R&CS","Retail and Customer Services"],["SU&PS","Security, Uniformed and Protective Services"],["SW&CS","Social Work and Caring Services"],["TD&L","Transport, Distribution and Logistics"]]},tsWT:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),o=a("YFqc"),i=a.n(o),s=r.a.createElement;t.a=function(e){var t=Object(n.useState)(e.show),a=t[0],o=t[1];return Object(n.useEffect)((function(){o(e.show)}),[e.show]),s("div",{id:"myModal",className:"modal",style:{display:a?"block":"",zIndex:9999}},s("div",{style:{display:a?"block":"",position:"absolute",width:"100%",height:"100%",backgroundColor:"black",opacity:.6}}),s("div",{className:"modal-content",style:{width:"400px",position:"absolute",left:"50%",top:"50%",marginLeft:"-200px",verticalAlign:"middle",padding:"20px",textAlign:"center"}},s("div",{style:{fontWeight:"bold"}}," ",e.children),e.success?s(i.a,{href:e.linkTo},s("a",{className:"btn btn-primary"},e.linkText)):e.linkText.length>0?s("div",{className:"prompt"},s("a",{type:"button",className:"btn btn-primary prompt_btn",onClick:function(){e.handleClose()},style:{fontSize:15}},e.linkText)):s(r.a.Fragment,null)))}},ynBa:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return h}));var n=a("o0o1"),r=a.n(n),o=a("HaE+"),i=a("q1tI"),s=a.n(i),l=a("y4gq"),c=a("TBf0"),u=a("YFqc"),d=a.n(u),m=a("tsWT"),f=a("4X1m"),p=a("nOHt"),g=a("hxr3"),b=s.a.createElement;function h(){var e=Object(i.useState)(""),t=e[0],a=e[1],n=Object(i.useState)(""),u=n[0],h=n[1],v=Object(i.useState)(""),y=v[0],N=v[1],S=Object(i.useState)(""),w=S[0],O=S[1],C=Object(i.useState)("wr"),E=C[0],x=C[1],k=Object(i.useState)("AB&M"),T=k[0],P=k[1],j=Object(i.useState)(""),A=j[0],R=j[1],_=Object(i.useState)(""),F=_[0],I=_[1],W=Object(i.useState)(""),B=W[0],M=W[1],U=Object(i.useState)(!1),z=U[0],D=U[1],H=Object(i.useState)(""),G=H[0],L=H[1],J=Object(i.useState)(""),q=J[0],X=J[1],Y=Object(i.useState)(""),Z=Y[0],K=Y[1],V=Object(i.useState)(""),$=V[0],Q=V[1],ee=Object(i.useState)("/assets/images/Profile_Icon.png"),te=ee[0],ae=ee[1],ne=Object(i.useState)(""),re=ne[0],oe=ne[1],ie=Object(i.useContext)(f.b),se=(ie.state,ie.dispatch),le=Object(i.useState)(!1),ce=le[0],ue=le[1],de=Object(i.useRef)(null),me=Object(i.useState)(!1),fe=me[0],pe=me[1],ge=Object(i.useState)(!1),be=ge[0],he=ge[1],ve=Object(i.useState)("");ve[0],ve[1];function ye(e){try{new URL(e)}catch(t){return!1}return!0}var Ne=Object(p.useRouter)(),Se=function(e,t,a,n){D(!0),L(e),Q(a),K(t),X(n)},we=function(){var e=Object(o.a)(r.a.mark((function e(){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&t.length<=0)&&/^([a-zA-Z0-9 _-]+)$/.test(t)){e.next=3;break}return Se("Edit Profile","","Okay","Invalid character in organization title field"),e.abrupt("return");case 3:if(ye(A)||""==A){e.next=6;break}return Se("Edit Profile","","Okay","Invalid URL. Example Format should be (http://domain.com)"),e.abrupt("return");case 6:if(t&&T&&E&&y){e.next=11;break}return Se("Check details","","Okay","Title, Category, Region and Town cannot be empty"),e.abrupt("return");case 11:return Se("Edit Profile","","","Please wait..."),e.next=14,(new c.g).updateBusinessProfile({title:t,website:A,region:E,location:u,category:T,description:F,city:y});case 14:if(e.sent.error&&Se("Edit Profile","","Okay","An error occured"),!fe){e.next=24;break}return Se("Edit Profile","","","Profile updated. Uploading image ..."),e.next=20,Oe();case 20:if(!e.sent.error){e.next=24;break}return Se("Edit Profile","","Okay","An error occured. Failed to update profile picture"),e.abrupt("return");case 24:se({type:"UPDATE_ORGANIZATION_TITLE",payload:t}),se({type:"SET_IMAGE",payload:te}),a=window.localStorage.getItem("cp-a"),n=JSON.parse(window.localStorage.getItem("user-profile")),(a=JSON.parse(a))&&(n.title=t,n.image=te,window.localStorage.setItem("user-profile",JSON.stringify(n)),a.username=t,a.image=te,window.localStorage.setItem("cp-a",JSON.stringify(a))),ue(!0),Se("Edit Profile","","Close","Success: Business profile saved");case 32:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){Object(o.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new c.g).getBusinessProfile();case 2:t=e.sent;try{a(t.title),N(t.city),P(t.category?t.category:"AB&M"),x(t.region?t.region:"wr"),h(t.location),R(t.website),I(t.description),M(void 0!==t.user.email?t.user.email:""),O(void 0!==t.user.phone_number?t.user.phone_number:""),t.image&&ae(t.image),he(!0)}catch(n){}case 4:case"end":return e.stop()}}),e)})))()}),[]),Object(i.useEffect)((function(){}),[T]);var Oe=function(){var e=Object(o.a)(r.a.mark((function e(){var t,a,n,o,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(window.localStorage.getItem("cp-a")),(a=new Headers).append("Authorization","Bearer "+t.access),(n=new FormData).append("image",re),o={method:"PUT",headers:a,body:n,redirect:"follow"},e.prev=6,e.next=9,fetch("/api/accounts/self_bus_update/",o);case 9:return i=e.sent,e.abrupt("return",i);case 13:return e.prev=13,e.t0=e.catch(6),e.abrupt("return",{error:"Failed to updload image"});case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(){return e.apply(this,arguments)}}();return b(s.a.Fragment,null,b(l.a,null,b(m.a,{title:G,linkTo:Z,linkText:$,show:z,success:Z.length>0,handleClose:function(){ce&&Ne.push("/businessprofile"),D(!1)}},b("p",null,q)),b("div",null,b("div",{className:"page-header"},b("h1",{className:"page-title row justify-content-center"},"Edit Information")),b("input",{type:"file",accept:"image/*",style:{display:"none"},ref:de,onChange:function(e){var t=new FileReader,a=e.target.files[0];a.size>3145728?Se("Edit Profile","","Close","File size too big"):(t.onload=function(e){ae(e.target.result),oe(a),pe(!0)},t.readAsDataURL(a))}}),b("div",{className:"row"},b("div",{className:"col-md-3 userprofileimage"},b("div",{className:"mb-4"},b("div",{className:"profile-pic"},b("img",{src:be?te:"",width:200,height:200,style:{borderRadius:"50%"}})),b("div",null,b("button",{type:"button",className:"btn btn-primary profileuploadimgbtn",onClick:function(){de.current.click()}},"Upload Image")),b("div",{className:"mt-4"},b("p",null,b("strong",null,"Note:")," To update your email address / phone number please go to your ",b("a",{href:"/auth/account-settings",id:"account-setting-edit"},"account setting"))))),b("div",{className:"col-lg-9 col-xl-9 col-md-12 col-sm-12"},b("div",{className:"row"},b("div",{className:"col-lg-5 col-md-12"},b("div",{className:"form-group"},b("label",{style:{fontWeight:"bold"}},"Organization Title ",b("span",{style:{color:"red"}},"*")),b("input",{type:"text",className:"form-control form-rounded text-field-hover",placeholder:"Full name",value:t,required:!0,onChange:function(e){return a(e.target.value)}})),b("div",{className:"form-group"},b("label",{style:{fontWeight:"bold"}},"Email Address"),b("input",{type:"text",className:"form-control form-rounded text-muted",placeholder:"your@email.com",readOnly:!0,value:B,style:{backgroundColor:"#f7f7f7"}})),b("div",{className:"form-group"},b("label",{style:{fontWeight:"bolder"}},"Category ",b("span",{style:{color:"red"}},"*")),b("select",{className:"form-control select2 form-rounded",onChange:function(e){P(e.target.value)},value:T},g.a.map((function(e,t){return b("option",{key:t,value:e[0]},e[1])})))),b("div",{className:"form-group"},b("label",{style:{fontWeight:"bolder"},htmlFor:"form-label"},"Description"),b("div",{className:"form-group"},b("div",{className:"input-group-date"},b("textarea",{style:{resize:"none"},className:"form-control form-rounded destextarea",rows:4,onChange:function(e){I(e.target.value)},value:F}))),b("div",null),b("h6",{style:{fontSize:"12px"}},b("span",{style:{color:"#1B98E0",fontWeight:"bold"}},"Note:")," Ensure this field has no more than 500 characters"))),b("div",{className:"col-lg-1"}),b("div",{className:"col-lg-5 col-md-12"},b("div",{className:"form-group"},b("label",{style:{fontWeight:"bolder"}},"Website"),b("input",{type:"text",className:"form-control form-rounded",placeholder:"eg. http://yourwebsite.com",value:A,onChange:function(e){return R(e.target.value)}})),b("div",{className:"form-group"},b("label",{style:{fontWeight:"bolder"}},"Phone Number"),b("input",{type:"number",className:"form-control form-rounded text-muted",placeholder:"eg. 020 000 0000",readOnly:!0,value:w,min:10,max:10,onChange:function(e){return O(e.target.value)},style:{backgroundColor:"#f7f7f7"}})),b("div",{className:"form-group"},b("label",{style:{fontWeight:"bolder"}},"Region ",b("span",{style:{color:"red"}},"*")),b("select",{className:"form-control select2 form-rounded",onChange:function(e){return x(e.target.value)},value:E},g.b.map((function(e,t){return b("option",{key:t,value:e[0]},e[1])})))),b("div",{className:"form-group"},b("label",{style:{fontWeight:"bolder"}},"Digital Address"),b("input",{type:"text",className:"form-control form-rounded",placeholder:"eg. AK-039-5028",value:u,onChange:function(e){return h(e.target.value)}})),b("div",{className:"form-group"},b("label",{style:{fontWeight:"bolder"}},"Town",b("span",{style:{color:"red"}},"*")),b("input",{type:"text",className:"form-control form-rounded",placeholder:"eg. Anaji",value:y,onChange:function(e){return N(e.target.value)}})))),b("div",{className:"col justify-content-center businessProfilebtn d-flex"},b("div",null,b("button",{className:"btn btn-primary btn-block businessProfilesave mb-1 mt-5",onClick:function(){return we()}},"Save")),b("div",{className:"col-md-3"},b(d.a,{href:"/businessprofile"},b("button",{className:"btn btn-primary btn-block businessProfileCancel mb-1 mt-5"},"Cancel")))))))))}}},[["Twb6",0,1,2,3]]]);