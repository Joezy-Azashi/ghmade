_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[35],{RU09:function(e,t,a){"use strict";a.r(t);var n=a("o0o1"),r=a.n(n),o=a("HaE+"),l=a("UYf5"),i=a("YFqc"),s=a.n(i),c=a("q1tI"),u=a.n(c),d=a("y4gq"),p=a("tsWT"),m=a("mH87"),f=a("wd/R"),g=a.n(f),b=(a("sq/0"),a("nOHt")),h=u.a.createElement,y=[{key:"GT",name:"Grants"},{key:"LN",name:"Loans"},{key:"ET",name:"Events"},{key:"SP",name:"Scholarships"}];t.default=function(){var e=Object(c.useState)(""),t=(e[0],e[1]),a=Object(c.useState)(""),n=(a[0],a[1]),i=Object(c.useState)(),f=(i[0],i[1],Object(c.useState)(!1)),v=f[0],_=f[1],w=Object(c.useState)(""),k=w[0],N=w[1],O=Object(c.useState)(""),j=O[0],x=O[1],S=Object(c.useState)(""),E=S[0],P=S[1],B=Object(c.useState)(""),J=B[0],T=B[1],D=Object(c.useState)(),Y=D[0],U=D[1],C=Object(c.useState)(!1),R=C[0],q=C[1],z=Object(c.useState)({}),W=z[0],M=z[1],L=Object(b.useRouter)(),F=function(e,t,a,n){_(!0),N(e),T(a),P(t),x(n)},I=function(){var e=Object(o.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null,"string"===typeof t){e.next=3;break}return e.abrupt("return",a);case 3:return(n=t.match(/data:([a-zA-Z0-9]+\/[a-zA-Z0-9-.+]+).*,.*/))&&n.length&&(a=n[1]),e.abrupt("return",a.substring(6));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(o.a)(r.a.mark((function e(t){var a,n,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),(a=new FormData).append("title",W.title),a.append("description",W.description),a.append("category",W.category),a.append("email",W.email),a.append("phone_number",W.phone_number),a.append("video_url",W.video_url),a.append("external_links",W.external_links),W.expiry_date,W.expiry_date&&a.append("expiry_date",g()(W.expiry_date).format("YYYY-MM-DDThh:mm")),Y&&a.append("media",Y,"blogPic.jpg"),!(W.email.length<=0&&W.phone_number.length<=0)){e.next=14;break}return F("Edit Blog","","Okay","Please provide either a valid email or phone number"),e.abrupt("return");case 14:if(!(W.phone_number.length>10)){e.next=17;break}return F("Edit Blog","","Okay","Please provide a valid phone number"),e.abrupt("return");case 17:if(!(W.phone_number.length<10&&W.phone_number.length>0)){e.next=20;break}return F("Edit Blog","","Okay","Please provide a valid phone number"),e.abrupt("return");case 20:if(!(new Date(W.expiry_date)<new Date)){e.next=25;break}return F("Edit Blog","","Okay","Please select a date that is after today"),e.abrupt("return");case 25:if(!(W.category.length<=0||"Select Category"===W.category)){e.next=30;break}return F("Edit Blog","","Okay","Please select a Blog Type"),e.abrupt("return");case 30:return e.prev=30,F("Edit Blog","","","Please wait..."),n=window.location.href.substring(window.location.href.lastIndexOf("/")+1),e.next=35,(new m.a).updatePersonalBlog(n,a);case 35:(o=e.sent).key&&(q(!0),F("Edit Blog","","Okay","Blog succesfully updated, pending approval.")),o.email.includes("Enter a valid email address.")&&F("Blog Post","","Okay","Please provide a valid email address."),o.description.includes("This field may not be blank.")&&F("Blog Post","","Okay","Please provide a blog description."),e.next=44;break;case 41:e.prev=41,e.t0=e.catch(30),"Request failed with status code 400"===e.t0.message&&F("Edit Blog","","Okay","Error updating blog. Please try again.....");case 44:if(!(W.description.length<1)){e.next=47;break}return F("Edit Blog","","Okay","Please provide a blog description"),e.abrupt("return");case 47:case"end":return e.stop()}}),e,null,[[30,41]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){var e=window.location.href.substring(window.location.href.lastIndexOf("/")+1);(new m.a).getPersonalBlogDetails(e).then((function(e){e.key&&(e.expiry_date=g()(e.expiry_date).format("YYYY-MM-DDThh:mm"),M(e))})).catch((function(e){return console.log(e)}))}),[]),h(u.a.Fragment,null,h(d.a,{title:"Update Blog Post",pageTitle:""},h(p.a,{title:k,linkTo:E,linkText:J,show:v,success:E.length>0,handleClose:function(){R&&L.push("/blog/viewmyblogpost"),_(!1)}},h("p",null,j)),h("div",{className:"page-header w-100"},h("h1",{className:"page-title"},"Edit Blog Post")),h("form",{className:" col form-group md-12",onSubmit:G},h("div",{className:"row"},h("div",{className:"col-lg-6 col-md-6 col-sm-12"},h("div",{className:"form-group"},h("label",{style:{fontWeight:"bolder"}},"Blog Topic ",h("span",{style:{color:"red"}},"*")),h("input",{type:"text",id:"blog_topic",className:"form-control form-rounded add_job_formleft",placeholder:"eg. Scholarship for Undergraduates",required:!0,value:W.title,onChange:function(e){var t=JSON.parse(JSON.stringify(W));t.title=e.target.value,M(t)}})),h("div",{className:"form-group"},h("label",{style:{fontWeight:"bolder"}},"Blog Type ",h("span",{style:{color:"red"}},"*")),h("select",{id:"blog_category",className:"form-control form-rounded add_job_formleft",value:W.category,onChange:function(e){var t=JSON.parse(JSON.stringify(W));t.category=e.target.value,M(t)}},h("option",null,"Select Category"),y.map((function(e,t){return h("option",{className:"dropdown-item",key:t,value:e.key,selected:W.category==e.key},e.name)})))),h("div",{className:"form-group"},h("div",{className:"input-group-data add_job_formright",id:"blog_description_txt"},h("label",{style:{fontWeight:"bolder"}},"Description of post ",h("span",{style:{color:"red"}},"*")),h(l.a,{apiKey:"jnq6bu3a3gvvn2nvdtz5e65m7ffttui7jqw5pgo6wvksdzo1",init:{placeholder:"What's on your mind?",height:200,force_br_newlines:!1,force_p_newlines:!1,forced_root_block:"",branding:!1,menubar:!1,resize:!1,statusbar:!1,fontsize_formats:"8pt 10pt 12pt 14pt 18pt 24pt 36pt",plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code wordcount emoticons link"],toolbar:"  bold  italic | backcolor |  emoticons                                 | link | alignleft  aligncenter  alignright  alignjustify | bullist | numlist                                 | fontsizeselect "},onEditorChange:function(e){var t=JSON.parse(JSON.stringify(W));t.description=e,M(t)},value:W.description})))),h("div",{className:"col-md-6"},h("div",{className:"form-group"},h("label",{style:{fontWeight:"bolder"}},"Email"),h("input",{type:"email",id:"blog_contact_details",className:"form-control form-rounded add_job_formleft",placeholder:"Email address",value:W.email,onChange:function(e){var a=JSON.parse(JSON.stringify(W));a.email=e.target.value,M(a),t(e.target.value)}})),h("div",{className:"form-group"},h("label",{style:{fontWeight:"bolder"}},"Phone Number"),h("input",{type:"number",id:"blog_contact_details",className:"form-control form-rounded add_job_formleft",placeholder:"Phone Number",value:W.phone_number,onChange:function(e){var t=JSON.parse(JSON.stringify(W));t.phone_number=e.target.value,M(t),n(e.target.value)}})),h("div",{className:"form-group"},h("label",{style:{fontWeight:"bolder"}},"Expiry Date"),h("input",{type:"date",id:"expiry_date",className:"form-control form-rounded add_job_formleft",value:"".concat(g()(W.expiry_date).format("YYYY-MM-DD")),onChange:function(e){var t=JSON.parse(JSON.stringify(W));t.expiry_date=e.target.value,M(t)}})),h("div",{className:"form-group"},h("label",{style:{fontWeight:"bolder"}},"Attach Video URL"),h("input",{type:"url",id:"blog_topic",className:"form-control form-rounded add_job_formleft",placeholder:"eg. http://www.youtube.com/GhncGh",value:W.video_url,onChange:function(e){var t=JSON.parse(JSON.stringify(W));t.video_url=e.target.value,M(t)}})),h("div",{className:"form-group"},h("div",{className:"mt-6"},h("input",{type:"file",accept:"image/*",className:"",id:"blog_image",onChange:function(e){e.preventDefault();var t=Object.values(e.target.files).filter((function(e){return e.type.includes("image")}));t<1&&F("Image Upload","","Okay","Please upload only images");var a,n=t.filter((function(e){return e.size<5e6?e:F("Upload Image","","Okay","File size too big. Upload an image less than 5MB")})).map((function(e){return URL.createObjectURL(e)})),l=new XMLHttpRequest;l.responseType="blob",l.onload=function(){var e=l.response,t=new FileReader;t.onload=Object(o.a)(r.a.mark((function e(){var n,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.result,l=function(){var e=Object(o.a)(r.a.mark((function e(t,a,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(t).then((function(e){return e.arrayBuffer()})).then((function(e){return new File([e],"".concat(a,".").concat(n),{type:"image/".concat(n)})})));case 1:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),e.t0=l,e.t1=n,e.next=6,I(n);case 6:return e.t2=e.sent,e.next=9,(0,e.t0)(e.t1,"blogImage",e.t2);case 9:a=e.sent,U(a);case 11:case"end":return e.stop()}}),e)}))),t.readAsDataURL(e)},l.open("GET",n),l.send()}}))))),h("div",{className:"row justify-content-center job_buttons"},h("div",{className:"mr-3 addjob_btn"},h("button",{className:"btn btn-primary btn-block addjob_save_btn mb-1 mt-5",id:"job_save_btn",type:"submit"},"Update")),h("div",null,h(s.a,{href:"/blog/viewmyblogpost"},h("button",{className:"btn btn-primary btn-block addjob_cancel_btn mb-1 mt-5",id:"job_cancel_btn"},"Cancel")))))))}},s9xt:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog/edit/[blogid]",function(){return a("RU09")}])}},[["s9xt",0,1,6,2,3,5,11]]]);