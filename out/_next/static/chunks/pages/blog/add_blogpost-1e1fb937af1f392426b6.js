_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[27],{"+JEa":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog/add_blogpost",function(){return a("2ff8")}])},"2ff8":function(e,t,a){"use strict";a.r(t);var n=a("o0o1"),r=a.n(n),o=a("HaE+"),l=a("UYf5"),s=a("YFqc"),i=a.n(s),c=a("q1tI"),u=a.n(c),d=a("y4gq"),p=a("tsWT"),b=a("TBf0"),m=a("wd/R"),f=a.n(m),g=a("sq/0"),h=a("nOHt"),v=u.a.createElement,y=[{key:"GT",name:"Grants"},{key:"LN",name:"Loans"},{key:"ET",name:"Events"},{key:"SP",name:"Scholarships"}];t.default=function(){Object(c.useRef)(null);var e=Object(c.useState)("Upload Image"),t=(e[0],e[1],Object(c.useState)("")),a=t[0],n=t[1],s=Object(c.useState)(""),m=s[0],_=s[1],j=Object(c.useState)(""),k=j[0],w=j[1],O=Object(c.useState)(""),N=O[0],S=O[1],P=Object(c.useState)(""),x=P[0],B=P[1],E=Object(c.useState)(),C=(E[0],E[1],Object(c.useState)("")),T=C[0],A=C[1],D=Object(c.useState)(),R=D[0],U=D[1],q=Object(c.useState)(""),z=q[0],W=(q[1],Object(c.useState)(!1)),L=W[0],F=W[1],Y=Object(c.useState)(""),G=Y[0],I=Y[1],J=Object(c.useState)(""),M=J[0],H=J[1],X=Object(c.useState)(""),Z=X[0],K=X[1],V=Object(c.useState)(""),Q=V[0],$=V[1],ee=Object(c.useState)(),te=ee[0],ae=ee[1],ne=Object(c.useState)(!1),re=ne[0],oe=ne[1],le=Object(c.useState)(""),se=(le[0],le[1],Object(c.useState)(!1)),ie=(se[0],se[1],Object(h.useRouter)()),ce=function(e,t,a,n){F(!0),I(e),$(a),K(t),H(n)},ue=function(){var e=Object(o.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null,"string"===typeof t){e.next=3;break}return e.abrupt("return",a);case 3:return(n=t.match(/data:([a-zA-Z0-9]+\/[a-zA-Z0-9-.+]+).*,.*/))&&n.length&&(a=n[1]),e.abrupt("return",a.substring(6));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(o.a)(r.a.mark((function e(t){var n,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),(n=new FormData).append("title",a),n.append("description",m),n.append("category",k),n.append("phone_number",x),n.append("video_url",T),n.append("external_links",z),N&&n.append("email",N),R&&n.append("expiry_date",f()(R).format("YYYY-MM-DDThh:mm")),te&&n.append("media",te,"blogPic.jpg"),!(N.length<=0&&x.length<=0)){e.next=14;break}return ce("Add Blog","","Okay","Please provide either a valid email or phone number"),e.abrupt("return");case 14:if(!(x.length>10)){e.next=17;break}return ce("Add Blog","","Okay","Please provide a valid phone number"),e.abrupt("return");case 17:if(!(x.length<10&&x.length>0)){e.next=20;break}return ce("Add Blog","","Okay","Please provide a valid phone number"),e.abrupt("return");case 20:if(!(new Date(R)<new Date)){e.next=25;break}return ce("Post A Blog","","Okay","Please select a date that is after today"),e.abrupt("return");case 25:if(!(k.length<=0||"Select Category"===k)){e.next=30;break}return ce("Add Request","","Okay","Please select a Blog Type"),e.abrupt("return");case 30:return e.prev=30,ce("Add Blog","","","Please wait..."),e.next=34,(new b.b).createBlog(n);case 34:(o=e.sent).key&&(oe(!0),ce("Blog Post","/blog/viewmyblogpost","Close","Blog succesfully posted, pending approval.")),o.email.includes("Enter a valid email address.")&&ce("Blog Post","","Okay","Please provide a valid email address."),e.next=42;break;case 39:e.prev=39,e.t0=e.catch(30),ce("Blog Post","","Okay","Error posting blog. Please try again.");case 42:if(!(m.length<1)){e.next=45;break}return ce("Post A Blog","/blog/add_blogpost","Okay","Please provide a proper blog description"),e.abrupt("return");case 45:case"end":return e.stop()}}),e,null,[[30,39]])})));return function(t){return e.apply(this,arguments)}}();return v(u.a.Fragment,null,v(d.a,{title:"Add Blog Post",pageTitle:""},v(p.a,{title:G,linkTo:Z,linkText:Q,show:L,success:Z.length>0,handleClose:function(){re&&ie.push("/blog/blog"),F(!1)}},v("p",null,M)),v("div",{className:"page-header w-100"},v("h1",{className:"page-title"},"Add Blog Post")),v("form",{className:" col form-group md-12",onSubmit:de},v("div",{className:"row"},v("div",{className:"col-lg-6 col-md-6 col-sm-12"},v("div",{className:"form-group"},v("label",{style:{fontWeight:"bolder"}},"Blog Topic ",v("span",{style:{color:"red"}},"*")),v("input",{type:"text",id:"blog_topic",className:"form-control form-rounded add_job_formleft",placeholder:"eg. Scholarship for Undergraduates",required:!0,onChange:function(e){n(e.target.value)}})),v("div",{className:"form-group"},v("label",{style:{fontWeight:"bolder"}},"Category ",v("span",{style:{color:"red"}},"*")),v("select",{id:"blog_category",className:"form-control form-rounded add_job_formleft",value:k,onChange:function(e){e.preventDefault(),w(e.target.value)}},v("option",null,"Select Category"),y.map((function(e,t){return v("option",{className:"dropdown-item",key:t,value:e.key},e.name)})))),v("div",{className:"form-group"},v("div",{className:"input-group-data add_job_formright",id:"blog_description_txt"},v(l.a,{apiKey:"jnq6bu3a3gvvn2nvdtz5e65m7ffttui7jqw5pgo6wvksdzo1",init:{placeholder:"What's on your mind?",height:200,force_br_newlines:!1,force_p_newlines:!1,forced_root_block:"",branding:!1,menubar:!1,resize:!1,statusbar:!1,fontsize_formats:"8pt 10pt 12pt 14pt 18pt 24pt 36pt",plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code wordcount emoticons link"],toolbar:"  bold  italic | backcolor |  emoticons                                 | link | alignleft  aligncenter  alignright  alignjustify | bullist | numlist                                 | fontsizeselect "},onEditorChange:function(e){return _(e)}})))),v("div",{className:"col-md-6"},v("div",{className:"form-group"},v("label",{style:{fontWeight:"bolder"}},"Email"),v("input",{type:"email",id:"blog_contact_details",className:"form-control form-rounded add_job_formleft",placeholder:"Email",onChange:function(e){e.preventDefault(),!0===Object(g.a)(e.target.value)&&S(e.target.value)}})),v("div",{className:"form-group"},v("label",{style:{fontWeight:"bolder"}},"Phone Number"),v("input",{type:"number",id:"blog_contact_details",className:"form-control form-rounded add_job_formleft",placeholder:"Phone Number",onChange:function(e){e.preventDefault(),B(e.target.value)}})),v("div",{className:"form-group"},v("label",{style:{fontWeight:"bolder"}},"Expiry Date"),v("input",{type:"date",id:"expiry_date",value:R,className:"form-control form-rounded add_job_formleft",onChange:function(e){U(e.target.value)}})),v("div",{className:"form-group"},v("label",{style:{fontWeight:"bolder"}},"Attach Video URL"),v("input",{type:"url",id:"blog_topic",className:"form-control form-rounded add_job_formleft",placeholder:"eg. http://www.youtube.com/GhncGh",onChange:function(e){return A(e.target.value)}})),v("div",{className:"form-group"},v("div",{className:"mt-6"},v("input",{type:"file",accept:"image/*",className:"",id:"blog_image",onChange:function(e){e.preventDefault();var t=Object.values(e.target.files).filter((function(e){return e.type.includes("image")}));t<1&&ce("Image Upload","","Okay","Please upload only images");var a,n=t.filter((function(e){return e.size<5e6?e:ce("Upload Image","","Okay","File size too big. Upload an image less than 5MB")})).map((function(e){return URL.createObjectURL(e)})),l=new XMLHttpRequest;l.responseType="blob",l.onload=function(){var e=l.response,t=new FileReader;t.onload=Object(o.a)(r.a.mark((function e(){var n,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.result,l=function(){var e=Object(o.a)(r.a.mark((function e(t,a,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(t).then((function(e){return e.arrayBuffer()})).then((function(e){return new File([e],"".concat(a,".").concat(n),{type:"image/".concat(n)})})));case 1:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),e.t0=l,e.t1=n,e.next=6,ue(n);case 6:return e.t2=e.sent,e.next=9,(0,e.t0)(e.t1,"blogImage",e.t2);case 9:a=e.sent,ae(a);case 11:case"end":return e.stop()}}),e)}))),t.readAsDataURL(e)},l.open("GET",n),l.send()}}))))),v("div",{className:"row justify-content-center job_buttons"},v("div",{className:"mr-3 addjob_btn"},v("button",{className:"btn btn-primary btn-block addjob_save_btn mb-1 mt-5",id:"job_save_btn",type:"submit"},"Post")),v("div",null,v(i.a,{href:"/blog/viewmyblogpost"},v("button",{className:"btn btn-primary btn-block addjob_cancel_btn mb-1 mt-5",id:"job_cancel_btn"},"Cancel")))))))}}},[["+JEa",0,1,6,2,3,5,11]]]);